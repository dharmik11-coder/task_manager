(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports=a(31)},24:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var s=a(1),l=a.n(s),n=a(15),c=a.n(n),r=(a(24),a(6)),d=a(5);var m=a(33).a.create({baseURL:"http://127.0.0.1:8000/api/"});const i=Object(d.b)("projects/fetchProjects",async()=>{return(await m.get("/projects/")).data}),o=Object(d.b)("tasks/fetchTasks",async()=>{return(await m.get("/tasks/")).data}),u=Object(d.b)("projects/addProject",async e=>{return(await m.post("/projects/",e)).data}),p=Object(d.b)("projects/deleteProject",async e=>(await m.delete(`/projects/${e}/`),e)),b=Object(d.b)("projects/updateProject",async e=>{let{id:t,name:a}=e;return(await m.put(`/projects/${t}/`,{name:a})).data});var j=Object(d.c)({name:"projects",initialState:{items:[],tasks:[],status:"idle",error:null},reducers:{},extraReducers(e){e.addCase(i.pending,e=>{e.status="loading"}).addCase(i.fulfilled,(e,t)=>{e.status="succeeded",e.items=t.payload}).addCase(i.rejected,(e,t)=>{e.status="failed",e.error=t.error.message}).addCase(o.pending,e=>{e.status="loading"}).addCase(o.fulfilled,(e,t)=>{e.status="succeeded",e.tasks=t.payload}).addCase(o.rejected,(e,t)=>{e.status="failed",e.error=t.error.message}).addCase(u.fulfilled,(e,t)=>{e.items.push(t.payload)}).addCase(p.fulfilled,(e,t)=>{e.items=e.items.filter(e=>e.id!==t.payload)}).addCase(b.fulfilled,(e,t)=>{const a=t.payload,s=e.items.findIndex(e=>e.id===a.id);-1!==s&&(e.items[s]=a)})}}).reducer;const k=Object(d.b)("tasks/fetchTasks",async()=>{return(await m.get("/tasks/")).data}),f=Object(d.b)("tasks/addTask",async e=>{return(await m.post("/tasks/",e)).data}),E=Object(d.b)("tasks/updateTask",async e=>{let{id:t,name:a,is_completed:s,project:l}=e;return(await m.put(`/tasks/${t}/`,{name:a,is_completed:s,project:l})).data}),g=Object(d.b)("tasks/deleteTask",async e=>(await m.delete(`/tasks/${e}/`),e));var y=Object(d.c)({name:"tasks",initialState:{items:[],status:"idle",error:null},reducers:{},extraReducers(e){e.addCase(k.pending,e=>{e.status="loading"}).addCase(k.fulfilled,(e,t)=>{e.status="succeeded",e.items=t.payload}).addCase(k.rejected,(e,t)=>{e.status="failed",e.error=t.error.message}).addCase(f.fulfilled,(e,t)=>{e.items.push(t.payload)}).addCase(E.fulfilled,(e,t)=>{const a=t.payload,s=e.items.findIndex(e=>e.id===a.id);-1!==s&&(e.items[s]=a)}).addCase(E.rejected,(e,t)=>{e.error=t.error.message}).addCase(g.fulfilled,(e,t)=>{e.items=e.items.filter(e=>e.id!==t.payload)})}}).reducer;var C=()=>{const[e,t]=Object(s.useState)(""),a=Object(r.b)();return l.a.createElement("form",{onSubmit:s=>{s.preventDefault(),e&&(a(u({name:e})),t(""))},className:"mb-3"},l.a.createElement("div",{className:"input-group"},l.a.createElement("input",{type:"text",className:"form-control",placeholder:"New Project Name",value:e,onChange:e=>t(e.target.value)}),l.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Add Project")))};var N=()=>{const e=Object(r.b)(),t=Object(r.c)(e=>e.projects.items),a=Object(r.c)(e=>e.tasks.items),n=Object(r.c)(e=>e.projects.status),c=Object(r.c)(e=>e.projects.error),[d,m]=Object(s.useState)(null),[o,u]=Object(s.useState)(""),[j,y]=Object(s.useState)(""),[N,v]=Object(s.useState)(!1),[h,O]=Object(s.useState)(null),[w,S]=Object(s.useState)(null),[x,T]=Object(s.useState)(""),[P,_]=Object(s.useState)(!1);Object(s.useEffect)(()=>{"idle"===n&&(e(i()),e(k()))},[n,e]);let $;return"loading"===n?$=l.a.createElement("div",null,"Loading..."):"succeeded"===n?$=t.map(t=>l.a.createElement("li",{key:t.id,className:"list-group-item"},l.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},d===t.id?l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"text",value:o,onChange:e=>u(e.target.value),className:"form-control"}),l.a.createElement("button",{className:"btn btn-success btn-sm ml-2",onClick:()=>(t=>{e(b({id:t,name:o})),m(null)})(t.id)},"Save")):l.a.createElement(l.a.Fragment,null,t.name,l.a.createElement("div",null,l.a.createElement("button",{className:"btn btn-primary btn-sm mr-2",onClick:()=>(e=>{m(e.id),u(e.name)})(t)},"Update"),l.a.createElement("button",{className:"btn btn-danger btn-sm",onClick:()=>(t=>{e(p(t))})(t.id)},"Delete"),l.a.createElement("button",{className:"btn btn-secondary btn-sm",onClick:()=>O(h===t.id?null:t.id)},h===t.id?"Cancel Task":"Add Task")))),h===t.id&&l.a.createElement("div",{className:"mt-2"},l.a.createElement("input",{type:"text",value:j,onChange:e=>y(e.target.value),className:"form-control",placeholder:"Enter task name"}),l.a.createElement("div",{className:"form-check mt-2"},l.a.createElement("input",{type:"checkbox",className:"form-check-input",id:`completed-${t.id}`,checked:N,onChange:e=>v(e.target.checked)}),l.a.createElement("label",{className:"form-check-label",htmlFor:`completed-${t.id}`},"Completed")),l.a.createElement("button",{className:"btn btn-primary btn-sm mt-2",onClick:()=>(t=>{j.trim()&&(e(f({name:j,is_completed:N,project:t})),y(""),v(!1),O(null))})(t.id)},"Add Task")),l.a.createElement("ul",{className:"list-group mt-2"},(e=>a.filter(t=>t.project===e))(t.id).map(t=>l.a.createElement("li",{key:t.id,className:"list-group-item"},w===t.id?l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"text",value:x,onChange:e=>T(e.target.value),className:"form-control"}),l.a.createElement("label",{className:"form-check-label ml-2"},l.a.createElement("input",{type:"checkbox",checked:P,onChange:e=>_(e.target.checked)})," Completed"),l.a.createElement("button",{className:"btn btn-success btn-sm ml-2",onClick:()=>((t,a)=>{console.log("Updating task:",{id:t,name:x,is_completed:P}),x.trim()?(e(E({id:t,name:x,is_completed:P,project:a})),S(null),T(""),_(!1)):console.error("Task name is empty, cannot update.")})(t.id,t.project)},"Save"),l.a.createElement("button",{className:"btn btn-secondary btn-sm ml-2",onClick:()=>S(null)},"Cancel")):l.a.createElement(l.a.Fragment,null,t.name," ",t.is_completed?"(Completed)":"(Incomplete)",l.a.createElement("div",null,l.a.createElement("button",{className:"btn btn-primary btn-sm mr-2",onClick:()=>(e=>{S(e.id),T(e.name),_(e.is_completed)})(t)},"Update"),l.a.createElement("button",{className:"btn btn-danger btn-sm",onClick:()=>(t=>{e(g(t))})(t.id)},"Delete")))))))):"failed"===n&&($=l.a.createElement("div",null,c)),l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"Project List"),l.a.createElement(C,null),l.a.createElement("ul",{className:"list-group"},$))};a(30);var v=()=>l.a.createElement("div",{className:"container"},l.a.createElement("h1",null,"Task Manager"),l.a.createElement(N,null));var h=Object(d.a)({reducer:{projects:j,tasks:y}});c.a.createRoot(document.getElementById("root")).render(l.a.createElement(r.a,{store:h},l.a.createElement(v,null)))}},[[17,1,2]]]);
//# sourceMappingURL=main.efa767b2.chunk.js.map